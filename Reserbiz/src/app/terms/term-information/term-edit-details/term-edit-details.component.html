<ns-action-bar
  [title]="currentEntity?.name"
  [hasMenu]="false"
  [overrideBackAction]="true"
  (onNavigationBack)="navigateBack()"
>
  <ActionItem
    icon="font://&#xf0c7;"
    class="fa fa-solid fa-solid action-item-button"
    (tap)="updateInformation()"
  ></ActionItem>
</ns-action-bar>

<ns-loader-layout [busy]="isBusy">
  <StackLayout width="100%" class="page-container">
    <StackLayout class="panel">
      <RadDataForm
        width="100%"
        height="100%"
        #termForm
        [source]="entityFormSource"
        [isReadOnly]="isBusy"
        (propertyCommitted)="onPropertyCommitted($event)"
      >
        <TKPropertyGroup
          tkDataFormGroups
          collapsible="true"
          [name]="
            'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.LABEL'
              | translate
          "
          hidden="false"
        >
          <TKGroupTitleStyle
            tkPropertyGroupTitleStyle
            fillColor="#eb5a2e"
            labelTextSize="17"
            labelFontStyle="Bold"
            labelTextColor="White"
          ></TKGroupTitleStyle>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="code"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.CODE_CONTROL.CONTROL_LABEL'
                | translate
            "
            [hintText]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.CODE_CONTROL.HINT_TEXT'
                | translate
            "
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Text">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
                labelPosition="Left"
                labelWidth="100"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="name"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.NAME_CONTROL.CONTROL_LABEL'
                | translate
            "
            [hintText]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.NAME_CONTROL.HINT_TEXT'
                | translate
            "
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Text">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
                labelPosition="Left"
                labelWidth="100"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="spaceTypeId"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.SPACE_TYPE_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="spaceTypeOptions"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
                labelPosition="Left"
                labelWidth="100"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="rate"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.RATE_CONTROL.CONTROL_LABEL'
                | translate
            "
            [hintText]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.RATE_CONTROL.HINT_TEXT'
                | translate
            "
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Decimal">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
                labelPosition="Left"
                labelWidth="100"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="maximumNumberOfOccupants"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.GENERAL_CONTROL_GROUP.MAXIMUM_NUMBER_OF_OCCUPANTS.CONTROL_LABEL'
                | translate
            "
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Stepper">
              <TKPropertyEditorParams
                tKEditorParams
                minimum="1"
              ></TKPropertyEditorParams>
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
                labelPosition="Left"
                labelWidth="100"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>
        </TKPropertyGroup>

        <TKPropertyGroup
          tkDataFormGroups
          collapsible="true"
          [name]="
            'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.DURATION_CONTROL_GROUP.LABEL'
              | translate
          "
          hidden="false"
        >
          <TKGroupTitleStyle
            tkPropertyGroupTitleStyle
            fillColor="#eb5a2e"
            labelTextSize="17"
            labelFontStyle="Bold"
            labelTextColor="White"
          ></TKGroupTitleStyle>

          <!-- <TKDataFormGridLayout tkPropertyGroupLayout> -->
          <TKEntityProperty
            tkPropertyGroupProperties
            name="durationUnit"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.DURATION_CONTROL_GROUP.DURATION_UNIT_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="durationOptions"
            index="0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="advancedPaymentDurationValue"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.DURATION_CONTROL_GROUP.ADVANCED_PAYMENT_DURATION_VALUE_CONTROL.CONTROL_LABEL'
                | translate
            "
            index="1"
            columnIndex="0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Stepper">
              <TKPropertyEditorParams
                tKEditorParams
                [minimum]="durationDetailsRangeValueProvider?.minimum"
                [maximum]="durationDetailsRangeValueProvider?.maximum"
              ></TKPropertyEditorParams>
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="depositPaymentDurationValue"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.DURATION_CONTROL_GROUP.DEPOSIT_PAYMENT_DURATION_VALUE_CONTROL.CONTROL_LABEL'
                | translate
            "
            index="1"
            columnIndex="1"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Stepper">
              <TKPropertyEditorParams
                tKEditorParams
                [minimum]="durationDetailsRangeValueProvider?.minimum"
                [maximum]="durationDetailsRangeValueProvider?.maximum"
              ></TKPropertyEditorParams>
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>
          <!-- </TKDataFormGridLayout> -->
        </TKPropertyGroup>

        <TKPropertyGroup
          tkDataFormGroups
          collapsible="true"
          [name]="
            'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.UTILITY_BILL_DETAILS_GROUP.LABEL'
              | translate
          "
          hidden="false"
        >
          <TKGroupTitleStyle
            tkPropertyGroupTitleStyle
            fillColor="#eb5a2e"
            labelTextSize="17"
            labelFontStyle="Bold"
            labelTextColor="White"
          ></TKGroupTitleStyle>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="excludeElectricBill"
            [displayName]="
              'TERM_ADD_DETAILS_PAGE.FORM_CONTROL.UTILITY_BILL_DETAILS_GROUP.EXCLUDE_ELECTRIC_BILL_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="yesNoOptions"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="electricBillAmount"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.UTILITY_BILL_DETAILS_GROUP.ELECTRIC_BILL_AMOUNT_CONTROL.CONTROL_LABEL'
                | translate
            "
            [readOnly]="entityFormSource?.excludeElectricBill === 0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Decimal">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="excludeWaterBill"
            [displayName]="
              'TERM_ADD_DETAILS_PAGE.FORM_CONTROL.UTILITY_BILL_DETAILS_GROUP.EXCLUDE_WATER_BILL_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="yesNoOptions"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="waterBillAmount"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.UTILITY_BILL_DETAILS_GROUP.WATER_BILL_AMOUNT_CONTROL.CONTROL_LABEL'
                | translate
            "
            [readOnly]="entityFormSource?.excludeWaterBill === 0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Decimal">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>
        </TKPropertyGroup>

        <TKPropertyGroup
          tkDataFormGroups
          collapsible="true"
          [name]="
            'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.PENALTY_DETAILS_GROUP.LABEL'
              | translate
          "
          hidden="false"
        >
          <TKGroupTitleStyle
            tkPropertyGroupTitleStyle
            fillColor="#eb5a2e"
            labelTextSize="17"
            labelFontStyle="Bold"
            labelTextColor="White"
          ></TKGroupTitleStyle>

          <!-- <TKDataFormStackLayout tkPropertyGroupLayout> -->
          <TKEntityProperty
            tkPropertyGroupProperties
            name="penaltyValueType"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.PENALTY_DETAILS_GROUP.PENALTY_VALUE_TYPE_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="valueTypeOptions"
            index="0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="SegmentedEditor">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>
          <!-- </TKDataFormStackLayout> -->

          <!-- <TKDataFormGridLayout tkPropertyGroupLayout> -->
          <TKEntityProperty
            tkPropertyGroupProperties
            name="penaltyValue"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.PENALTY_DETAILS_GROUP.PENALTY_VALUE_CONTROL.CONTROL_LABEL'
                | translate
            "
            index="1"
            columnIndex="1"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Decimal">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="penaltyAmountPerDurationUnit"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.PENALTY_DETAILS_GROUP.PENALTY_AMOUNT_PER_DURATION_UNIT_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="durationOptions"
            index="1"
            columnIndex="0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="penaltyEffectiveAfterDurationUnit"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.PENALTY_DETAILS_GROUP.PENALTY_EFFECTIVE_AFTER_DURATION_UNIT_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="durationOptions"
            index="2"
            columnIndex="0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="penaltyEffectiveAfterDurationValue"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.PENALTY_DETAILS_GROUP.PENALTY_EFFECTIVE_AFTER_DURATION_VALUE_CONTROL.CONTROL_LABEL'
                | translate
            "
            index="2"
            columnIndex="1"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Decimal">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>
          <!-- </TKDataFormGridLayout> -->
        </TKPropertyGroup>

        <TKPropertyGroup
          tkDataFormGroups
          collapsible="true"
          [name]="
            'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.MISCELLANEOUS_SETTINGS_GROUP.LABEL'
              | translate
          "
          hidden="false"
        >
          <TKGroupTitleStyle
            tkPropertyGroupTitleStyle
            fillColor="#eb5a2e"
            labelTextSize="17"
            labelFontStyle="Bold"
            labelTextColor="White"
          ></TKGroupTitleStyle>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="miscellaneousDueDate"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.MISCELLANEOUS_SETTINGS_GROUP.MISCELLANEOUS_DUE_DATE_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="miscellaneousDueDateOptions"
            index="0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="includeMiscellaneousCheckAndCalculateForPenalty"
            [displayName]="
              'TERM_ADD_DETAILS_PAGE.FORM_CONTROL.MISCELLANEOUS_SETTINGS_GROUP.INCLUDE_CHECK_AND_CALCULATE_FOR_PENALTY_CONTROL.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="yesNoOptions"
            index="1"
            columnIndex="0"
            [readOnly]="!(entityFormSource?.miscellaneousDueDate === 1)"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>
        </TKPropertyGroup>

        <TKPropertyGroup
          tkDataFormGroups
          collapsible="true"
          [name]="
            'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.AUTOMATION_SETTINGS_GROUP.LABEL'
              | translate
          "
          hidden="false"
        >
          <TKGroupTitleStyle
            tkPropertyGroupTitleStyle
            fillColor="#eb5a2e"
            labelTextSize="17"
            labelFontStyle="Bold"
            labelTextColor="White"
          ></TKGroupTitleStyle>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="generateAccountStatementDaysBeforeValue"
            [displayName]="
              'TERM_EDIT_DETAILS_PAGE.FORM_CONTROL.AUTOMATION_SETTINGS_GROUP.DAYS_BEFORE_GENERATING_ACCOUNT_STATEMENT_CONTROL.CONTROL_LABEL'
                | translate
            "
            index="0"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Number">
            </TKPropertyEditor>
          </TKEntityProperty>

          <TKEntityProperty
            tkPropertyGroupProperties
            name="autoSendNewAccountStatement"
            [displayName]="
              'TERM_ADD_DETAILS_PAGE.FORM_CONTROL.AUTOMATION_SETTINGS_GROUP.AUTO_SEND_ACCOUNT_STATEMENT.CONTROL_LABEL'
                | translate
            "
            [valuesProvider]="yesNoOptions"
            index="1"
          >
            <TKPropertyEditor tkEntityPropertyEditor type="Picker">
              <TKPropertyEditorStyle
                tkPropertyEditorStyle
                labelTextSize="14"
              ></TKPropertyEditorStyle>
            </TKPropertyEditor>
          </TKEntityProperty>
        </TKPropertyGroup>
      </RadDataForm>
    </StackLayout>
  </StackLayout>
</ns-loader-layout>
