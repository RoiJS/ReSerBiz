<ns-action-bar
  [title]="'TENANT_CONTACT_PERSON_LIST_PAGE.ACTION_BAR_TITLE' | translate"
  [hasMenu]="false"
  *ngIf="!multipleSelectionActive"
>
  <ActionItem
    icon="font://&#xf03a;"
    class="fa fa-solid navbar-button"
    (tap)="activateDeactivateMultipleSelection()"
  ></ActionItem>
</ns-action-bar>

<ns-action-bar
  [title]="selectedCount"
  [showBackButton]="false"
  [hasMenu]="false"
  *ngIf="multipleSelectionActive"
>
  <ActionItem
    icon="font://&#xf2ed;"
    class="fa fa-solid navbar-button"
    (tap)="deleteSelectedContactPersons()"
  ></ActionItem>
  <ActionItem
    icon="font://&#xf00d;"
    class="fa fa-solid navbar-button"
    (tap)="activateDeactivateMultipleSelection()"
  ></ActionItem>
</ns-action-bar>

<ns-loader-layout [busy]="IsBusy">
  <StackLayout width="100%" height="100%" class="page-container">
    <RadListView
      width="100%"
      height="100%"
      #contactPersonView
      class="contact-person-list-container"
      [items]="contactPersonList"
      swipeActions="true"
      selectionBehavior="Press"
      multipleSelection="true"
      (itemSelected)="goToEditDetailsFromMainItem($event)"
      (itemDeselected)="deselectedItem($event)"
      (itemSwipeProgressStarted)="onSwipeCellStarted($event)"
    >
      <ng-template tkListItemTemplate let-contactPerson="item">
        <GridLayout
          class="contact-person-detail list-item-template"
          rows="*, *"
          columns="70, *"
        >
          <!-- Template for not selected tenant Item -->
          <StackLayout
            *ngIf="multipleSelectionActive && !contactPerson.isSelected"
            row="0"
            col="0"
            rowSpan="2"
            class="m-r-10"
          >
            <StackLayout
              class="contact-person-detail__selection-mode contact-person-detail__selection-mode--is-not-selected"
              verticalAlignment="middle"
            >
            </StackLayout>
          </StackLayout>

          <!-- Template for selected tenant Item -->
          <StackLayout
            *ngIf="multipleSelectionActive && contactPerson.isSelected"
            row="0"
            col="0"
            rowSpan="2"
            class="m-r-10"
          >
            <StackLayout
              class="contact-person-detail__selection-mode contact-person-detail__selection-mode--is-selected"
              verticalAlignment="middle"
            >
              <label
                class="fa fa-solid"
                horizontalAlignment="center"
                text="&#xf00c;"
              ></label>
            </StackLayout>
          </StackLayout>

          <!-- Template tenant item photo placeholder -->
          <StackLayout
            *ngIf="!multipleSelectionActive && !contactPerson.isSelected"
            row="0"
            col="0"
            rowSpan="2"
            class="m-r-10"
          >
            <StackLayout
              class="contact-person-detail__image-container"
              verticalAlignment="middle"
              [backgroundColor]="contactPerson.photoBackgroundColor"
            >
              <label
                class="image"
                horizontalAlignment="center"
                [text]="contactPerson.nameInitials"
              ></label>
            </StackLayout>
          </StackLayout>

          <StackLayout
            class="contact-person-detail__fullname"
            verticalAlignment="middle"
            row="0"
            col="1"
          >
            <label class="fullname" [text]="contactPerson.fullName"></label>
          </StackLayout>

          <StackLayout row="1" col="1">
            <label
              class="username"
              [text]="contactPerson.contactNumber"
            ></label>
          </StackLayout>
        </GridLayout>
      </ng-template>

      <GridLayout
        *tkListItemSwipeTemplate
        columns="*, auto"
        class="contact-person-item-swipe-template"
      >
        <FlexBoxLayout
          col="1"
          class="contact-person-item-swipe-template__option-container"
          id="contactPersonSwipeActions"
          justifyContent="space-around"
          *ngIf="!multipleSelectionActive && isNotNavigateToOtherPage"
        >
          <button
            alignSelf="center"
            class="fa fa-solid contact-person-item-swipe-template__option"
            text="&#xf044;"
            (tap)="goToEditDetailsFromOptionItem()"
          ></button>
          <button
            alignSelf="center"
            class="fa fa-solid contact-person-item-swipe-template__option"
            text="&#xf2ed;"
            (tap)="deleteSelectedContactPerson()"
          ></button>
        </FlexBoxLayout>
      </GridLayout>
    </RadListView>
  </StackLayout>

  <ns-floating-button
    (tapButton)="goToAddContactPesonPage()"
    [icon]="'&#xf234;'"
  ></ns-floating-button>
</ns-loader-layout>
