<ns-action-bar
  [title]="'TENANTS_LIST_PAGE.ACTION_BAR_TITLE' | translate"
  [showBackButton]="false"
  *ngIf="!multipleSelectionActive"
>
  <ActionItem
    icon="font://&#xf03a;"
    class="fa fa-solid navbar-button"
    (tap)="activateDeactivateMultipleSelection()"
  ></ActionItem>
</ns-action-bar>

<ns-action-bar
  [title]="selectedCount"
  [showBackButton]="false"
  [hasMenu]="false"
  *ngIf="multipleSelectionActive"
>
  <ActionItem
    icon="font://&#xf2ed;"
    class="fa fa-solid navbar-button"
    (tap)="deleteSelectedTenants()"
  ></ActionItem>
  <ActionItem
    icon="font://&#xf00d;"
    class="fa fa-solid navbar-button"
    (tap)="activateDeactivateMultipleSelection()"
  ></ActionItem>
</ns-action-bar>

<ns-loader-layout [busy]="IsBusy">
  <RadListView
    top="0"
    left="0"
    width="100%"
    height="100%"
    #tenantListView
    class="tenant-list-container"
    [items]="tenants"
    swipeActions="true"
    selectionBehavior="Press"
    multipleSelection="true"
    pullToRefresh="true"
    (itemSelected)="goToTenantDetails($event)"
    (itemDeselected)="deselectedItem($event)"
    (itemSwipeProgressStarted)="onSwipeCellStarted($event)"
    (pullToRefreshInitiated)="onPullToRefreshInitiated($event)"
  >
    <ng-template tkListItemTemplate let-tenant="item">
      <GridLayout
        class="tenant-detail list-item-template"
        rows="*, *"
        columns="70, *"
      >
        <!-- Template for not selected tenant Item -->
        <StackLayout
          *ngIf="multipleSelectionActive && !tenant.isSelected"
          row="0"
          col="0"
          rowSpan="2"
          class="m-r-10"
        >
          <StackLayout
            class="tenant-detail__selection-mode tenant-detail__selection-mode--is-not-selected"
            verticalAlignment="middle"
          >
          </StackLayout>
        </StackLayout>

        <!-- Template for selected tenant Item -->
        <StackLayout
          *ngIf="multipleSelectionActive && tenant.isSelected"
          row="0"
          col="0"
          rowSpan="2"
          class="m-r-10"
        >
          <StackLayout
            class="tenant-detail__selection-mode tenant-detail__selection-mode--is-selected"
            verticalAlignment="middle"
          >
            <label
              class="fa fa-solid"
              horizontalAlignment="center"
              text="&#xf00c;"
            ></label>
          </StackLayout>
        </StackLayout>

        <!-- Template tenant item photo placeholder -->
        <StackLayout
          *ngIf="!multipleSelectionActive && !tenant.isSelected"
          row="0"
          col="0"
          rowSpan="2"
          class="m-r-10"
        >
          <StackLayout
            class="tenant-detail__image-container"
            verticalAlignment="middle"
            [backgroundColor]="tenant.photoBackgroundColor"
          >
            <label
              class="image"
              horizontalAlignment="center"
              [text]="tenant.nameInitials"
            ></label>
          </StackLayout>
        </StackLayout>

        <StackLayout
          class="tenant-detail__fullname"
          verticalAlignment="middle"
          row="0"
          col="1"
        >
          <label class="fullname" [text]="tenant.fullName"></label>
        </StackLayout>

        <StackLayout row="1" col="1">
          <label class="username" [text]="tenant.emailAddress"></label>
        </StackLayout>
      </GridLayout>
    </ng-template>

    <GridLayout
      *tkListItemSwipeTemplate
      columns="*, auto"
      class="tenant-item-swipe-template"
    >
      <FlexBoxLayout
        col="1"
        class="tenant-item-swipe-template__option-container"
        id="tenantSwipeActions"
        justifyContent="space-around"
        *ngIf="!multipleSelectionActive && isNotNavigateToOtherPage"
      >
        <button
          alignSelf="center"
          class="fa fa-solid tenant-item-swipe-template__option"
          text="&#xf2ed;"
          (tap)="deleteSelectedTenant()"
        ></button>
        <button
          alignSelf="center"
          class="fa fa-solid tenant-item-swipe-template__option"
          text="&#xf4fc;"
          (tap)="activateSelectedTenant()"
          *ngIf="!isCurrentTenantActive"
        ></button>
        <button
          alignSelf="center"
          class="fa fa-solid tenant-item-swipe-template__option"
          text="&#xf506;"
          (tap)="deactivateSelectedTenant()"
          *ngIf="isCurrentTenantActive"
        ></button>
      </FlexBoxLayout>
    </GridLayout>
  </RadListView>

  <ns-floating-button
    (tapButton)="goToAddTenantsPage()"
    [icon]="'&#xf234;'"
  ></ns-floating-button>
</ns-loader-layout>
